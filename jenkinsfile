node {
    // Define workspace cleanup
    stage('Clean Workspace') {
        echo 'Cleaning workspace...'
        deleteDir() // Deletes workspace contents
    }

    // Checkout source code from Git
    stage('Checkout') {
        echo 'Checking out source code...'
        git branch: 'main', url: 'https://github.com/spring-projects/spring-petclinic.git'
    }

    // Compile the code
    stage('Build') {
        echo 'Building the project...'
        try {
          bat 'mvnw clean install -DskipTests' 
        } catch (Exception e) {
            error "Build failed: ${e.message}"
        }
    }

  }
